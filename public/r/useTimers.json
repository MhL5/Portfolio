{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "useTimers",
  "type": "registry:hook",
  "title": "useTimers",
  "description": "Using `facade` pattern, the logic is handled by the `useTimers` hook and this module exports a `useTimeout` and a `useInterval` hook.",
  "files": [
    {
      "path": "src/registry/hooks/useTimers/useTimers.ts",
      "content": "\"use client\";\r\n\r\nimport { useCallback, useEffect, useRef } from \"react\";\r\n\r\ntype Callback = () => void;\r\n\r\n/**\r\n * Internal helper for timers. Use `useTimeout` or `useInterval` instead.\r\n */\r\nfunction _useTimers(\r\n  callback: Callback,\r\n  delay: number,\r\n  type: \"timeout\" | \"interval\",\r\n) {\r\n  const callbackRef = useRef(callback);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const set = useCallback(() => {\r\n    timerRef.current =\r\n      type === \"timeout\"\r\n        ? setTimeout(() => callbackRef.current(), delay)\r\n        : setInterval(() => callbackRef.current(), delay);\r\n  }, [delay, type]);\r\n\r\n  const clear = useCallback(() => {\r\n    if (!timerRef.current) return;\r\n\r\n    if (type === \"timeout\") clearTimeout(timerRef.current);\r\n    else clearInterval(timerRef.current);\r\n  }, [type]);\r\n\r\n  const reset = useCallback(() => {\r\n    clear();\r\n    set();\r\n  }, [clear, set]);\r\n\r\n  useEffect(() => {\r\n    callbackRef.current = callback;\r\n  }, [callback]);\r\n\r\n  // biome-ignore lint/correctness/useExhaustiveDependencies: we need to run this on delay change\r\n  useEffect(() => {\r\n    set();\r\n    return clear;\r\n  }, [delay, set, clear]);\r\n\r\n  return { reset, clear };\r\n}\r\n\r\nconst useInterval = (callback: Callback, delay: number) =>\r\n  _useTimers(callback, delay, \"interval\");\r\n\r\nconst useTimeout = (callback: Callback, delay: number) =>\r\n  _useTimers(callback, delay, \"timeout\");\r\n\r\nexport { useInterval, useTimeout };\r\n",
      "type": "registry:hook"
    }
  ]
}